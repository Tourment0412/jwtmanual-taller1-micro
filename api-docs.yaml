openapi: 3.0.1
info:
  title: OpenAPI definition
  version: v0
servers:
- url: http://localhost:8080
  description: Generated server url
tags:
- name: Cambio de clave
  description: Cambia la clave un usuario
- name: Recuperacion de clave
  description: Hace que se envie un codigo de verificacion al correo de la cuenta
- name: Login de usuario
  description: Permite iniciar sesion al usario
- name: Actualizar datos de usuario
  description: Actualiza los datos de la cuenta del usuario autenticado
- name: Obtener Usuarios
  description: Obtiene parte de los usuarios del sistema
- name: Registro de usuarios
  description: Registra un nuevo usuario
paths:
  /usuario/actualizar:
    put:
      tags:
      - Actualizar datos de usuario
      summary: Actualizar usuario
      description: Actualiza los datos de un usuario existente
      operationId: actualizarDatos
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DatosUsuario"
        required: true
      responses:
        "200":
          description: Usuario actualizado exitosamente
          content:
            application/json:
              schema:
                type: string
        "400":
          description: "Atributos de usuario, correo y contrase単a son obligatorios"
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MessageDTO"
        "404":
          description: Usuario no encontrado
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MessageDTO"
      security:
      - bearerAuth: []
  /publico/registro:
    post:
      tags:
      - Registro de usuarios
      summary: Registrar usuario
      description: Registra un nuevo usuario en la base de datos
      operationId: registrarUsuario
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DatosUsuario"
        required: true
      responses:
        "400":
          description: "Atributos de usuario, correo y contrase単a son obligatorios"
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MessageDTO"
        "409":
          description: El usuario ya existe
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MessageDTO"
        "200":
          description: Usuario registrado exitosamente
          content:
            application/json:
              schema:
                type: string
  /publico/recuperarClave:
    post:
      tags:
      - Recuperacion de clave
      summary: Recuperar clave
      description: Inicia el proceso para poder obtner una nueva cuenta del usuario
      operationId: recuperarClave
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RecuperarClaveDTO"
        required: true
      responses:
        "404":
          description: Usuario no existente
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MessageDTO"
        "400":
          description: El usuario es obligatorio
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MessageDTO"
        "200":
          description: Codigo de verificacion enviado exitosamente
          content:
            application/json:
              schema:
                type: string
  /publico/login:
    post:
      tags:
      - Login de usuario
      summary: Iniciar sesion
      description: Genera el token de autenticacion para el usuario
      operationId: login
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DatosUsuario"
        required: true
      responses:
        "404":
          description: No existe el usuario con los datos indicados
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MessageDTO"
        "200":
          description: Token de autenticacion generado exitosamente
          content:
            application/json:
              schema:
                type: string
        "400":
          description: Atributos de correo y contrase単a son obligatorios
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MessageDTO"
  /publico/cambiarContrase単a:
    post:
      tags:
      - Cambio de clave
      summary: Cambiar contrasena
      description: "Mediante el ingreso del codigo recibido por email, permiteestabloecer\
        \ una nueva contrasena"
      operationId: cambiarClave
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CambioClaveDTO"
        required: true
      responses:
        "400":
          description: Datos de cambio de clave son obligatorios
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MessageDTO"
        "403":
          description: Codigo de verificacion incorrecto
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MessageDTO"
        "200":
          description: Clave cambiada exitosamente
          content:
            application/json:
              schema:
                type: string
  /admin/get-all:
    get:
      tags:
      - Obtener Usuarios
      summary: Obtener usuarios
      description: Obtiene una pagina de los usuarios que hay en el sistema
      operationId: obtenerUsuarios
      parameters:
      - name: pagina
        in: query
        required: false
        schema:
          type: integer
          format: int32
          default: 0
      responses:
        "400":
          description: Numero de pagina invalido
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MessageDTO"
        "200":
          description: Lista de usuarios obtenida exitosamente
          content:
            application/json:
              schema:
                type: string
        "404":
          description: Pagina no encontrada
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MessageDTO"
      security:
      - bearerAuth: []
components:
  schemas:
    DatosUsuario:
      required:
      - clave
      - correo
      - usuario
      type: object
      properties:
        usuario:
          type: string
        correo:
          type: string
        clave:
          type: string
    MessageDTO:
      type: object
      properties:
        error:
          type: boolean
        respuesta:
          type: object
    RecuperarClaveDTO:
      required:
      - usuario
      type: object
      properties:
        usuario:
          type: string
    CambioClaveDTO:
      required:
      - clave
      - codigo
      - usuario
      type: object
      properties:
        usuario:
          type: string
        clave:
          type: string
        codigo:
          type: string
  securitySchemes:
    bearerAuth:
      type: http
      in: header
      scheme: bearer
      bearerFormat: JWT
